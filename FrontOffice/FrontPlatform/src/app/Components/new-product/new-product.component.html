<div class="main-new-product">

  <div class="container-fluid py-4">
  <div class="row min-vh-80">
  <div class="col-lg-8 col-md-10 col-12 m-auto">
  <h3 class="mt-3 mb-0 text-center">Add new Product</h3>
  <p class="lead font-weight-normal opacity-8 mb-7 text-center">This information will let us know more about you.</p>
  <div class="card">
  <div class="card-header p-0 position-relative mt-n5 mx-3 z-index-2">
  <div class="bg-gradient-primary shadow-primary border-radius-lg pt-4 pb-3">
  <div class="multisteps-form__progress">
  <button class="multisteps-form__progress-btn js-active" type="button" title="Product Info">
  <span>1. Product Info</span>
  </button>
  <button class="multisteps-form__progress-btn" type="button" title="Media">2. Media</button>
  <button class="multisteps-form__progress-btn" type="button" title="Pricing">4. Pricing</button>
  </div>
  </div>
  </div>
  <div class="card-body">
  <form class="multisteps-form__form">

  <div class="multisteps-form__panel pt-3 border-radius-xl bg-white js-active" data-animation="FadeIn">
  <h5 class="font-weight-bolder">Product Information</h5>
  <div class="multisteps-form__content">
  <div class="row mt-3">
  <div class="col-12 col-sm-6">
    
  <div class="input-group input-group-dynamic">

  <input  class="multisteps-form__input form-control" type="text"  name="name"  placeholder="Enter the name of product " id="name"
  required
  [(ngModel)]="product.name"
  pattern="[a-zA-Z0-9]{3,50}"
  name="name" />
  </div>
  </div>
  </div>
  <div class="row">
  <div class="col-sm-6">
    <label for="description" class="mt-4">Description</label>
    <div class="row">
      <div class="col-sm-12">
        <!-- Élément pour éditer la description -->
        <div id="edit-description" class="h-50" contenteditable="true"
             (input)="updateDescription($event)">
          <p>Some initial <strong>bold</strong> text</p>
        </div>
        </div>
        </div>
      </div>

      <div class="col-sm-6 mt-sm-3 mt-5">
        <label class="form-control ms-0" for="category">Category</label>
        <select class="form-control" name="choices-category" id="category" [(ngModel)]="selectedCategory">
          <option *ngFor="let category of categories" [value]="category.categoryName">{{ category.categoryName }}</option>
        </select>





  <label for="quantity" class="form-label">Quantity</label>
  <input class="form-control" type="number" id="quantity"
         required
         [(ngModel)]="product.quantity"
         min="1"

         name="quantity">

  </div>
  </div>
  <div class="button-row d-flex mt-4">
    <button class="btn bg-gradient-dark ms-auto mb-0 js-btn-next" type="button" title="Next">Next</button>
  </div>
  </div>
  </div>

  <div class="multisteps-form__panel pt-3 border-radius-xl bg-white" data-animation="FadeIn">
  <h5 class="font-weight-bolder">Media</h5>
  <div class="multisteps-form__content">
  <div class="row mt-3">
    <div *ngIf="loading" class="spinner-container">
      <div class="spinner"></div>
    </div>

    <div class="col-md-6">
      <form [formGroup]="imageForm" (ngSubmit)="infer()">
        <div class="btn-group" role="group" aria-label="Method selection">
          <input type="radio" class="btn-check" formControlName="method" id="upload" value="upload" checked>
          <label class="btn btn-outline-primary" for="upload">Upload</label>
    
          <input type="radio" class="btn-check" formControlName="method" id="url" value="url">
          <label class="btn btn-outline-primary" for="url">URL</label>
        </div>
    
        <div *ngIf="imageForm.get('method')?.value === 'upload'" class="mt-3">
          <input type="file" class="form-control" (change)="onFileSelected($event)" formControlName="file">
        </div>
    
        <div *ngIf="imageForm.get('method')?.value === 'url'" class="mt-3">
          <input type="text" class="form-control" formControlName="url" placeholder="Enter image URL">
        </div>
    
        <button type="submit" class="btn btn-primary mt-3">Submit</button>
      </form>
    </div>
    


    <div class="col-md-6">
      <div class="image-preview-container">
        <img *ngIf="product.image" [src]="product.image" alt="Image Preview" class="image-preview" />
      </div>
    </div>
  </div>
  <div class="button-row d-flex mt-4">
  <button class="btn bg-gradient-light mb-0 js-btn-prev" type="button" title="Prev">Prev</button>
  <button class="btn bg-gradient-dark ms-auto mb-0 js-btn-next" type="button" title="Next" [disabled]="!isProductForAutistic">Next</button>
</div>
  </div>
  </div>

  <!-- <div class="multisteps-form__panel pt-3 border-radius-xl bg-white" data-animation="FadeIn">
    <h5 class="font-weight-bolder">Media</h5>
    <div class="multisteps-form__content">
    <div class="row mt-3">
      <div class="col-md-6">
        <form action="/file-upload" id="dropzone" class="dropzone">
          <div class="fallback">
            <input name="file" type="file" multiple id="image" (change)="onFileSelected($event)" class="form-control" />

          </div>


        </form>
      </div>

      <div class="col-md-6">
        <div class="image-preview-container">
          <img *ngIf="product.image" [src]="product.image" alt="Image Preview" class="image-preview" />
        </div>
      </div>
    </div>
    <div class="button-row d-flex mt-4">
    <button class="btn bg-gradient-light mb-0 js-btn-prev" type="button" title="Prev">Prev</button>
    <button class="btn bg-gradient-dark ms-auto mb-0 js-btn-next" type="button" title="Next">Next</button>
    </div>
    </div>
    </div> -->

  <div class="multisteps-form__panel pt-3 border-radius-xl bg-white h-100" data-animation="FadeIn">
  <h5 class="font-weight-bolder">Pricing</h5>
  <div class="multisteps-form__content mt-3">
  <div class="row">
  <div class="col-3">
  <div class="input-group input-group-dynamic">
    <input type="text" class="form-control w-100" id="priceInput" [(ngModel)]="product.price" name="price" required pattern="\d+(\.\d{1,2})?">
  </div>
  </div>
  <div class="col-4">
  <select class="form-control" name="choices-sizes" id="choices-currency" [(ngModel)]="product.currency" name="currency">
    <option [value]="'USD'" [selected]="product.currency === 'USD'">USD</option>
    <option [value]="'EUR'" [selected]="product.currency === 'EUR'">EUR</option>
    <option [value]="'GBP'" [selected]="product.currency === 'GBP'">GBP</option>
    <option [value]="'CNY'" [selected]="product.currency === 'CNY'">CNY</option>
    <option [value]="'INR'" [selected]="product.currency === 'INR'">INR</option>
    <option [value]="'BTC'" [selected]="product.currency === 'BTC'">BTC</option>
  </select>
  </div>
  <div class="col-5">
  <div class="input-group input-group-dynamic">
  <label class="form-label">SKU</label>
  <input class="multisteps-form__input form-control" id="skuInput" type="text" [(ngModel)]="product.sku" name="SKU" required pattern="[A-Z0-9]{5,10}">
</div>
  </div>
  </div>


  <div class="col-4">
    <select class="select-discount" name="choices-sizes" id="choices-discount" [(ngModel)]="product.discount" name="discount">
      <option value="0" selected>No discount</option>
      <option value="5">5% off</option>
      <option value="10">10% off</option>
      <option value="20">20% off</option>
    </select>
  </div>
  <div class="button-row d-flex mt-0 mt-md-4">
  <button class="btn bg-gradient-light mb-0 js-btn-prev" type="button" title="Prev">Prev</button>
  <button (click)="addProduct()" class="btn bg-gradient-dark ms-auto mb-0" type="button" title="Send">Send</button>

</div>
<main class="main-notification" *ngIf="showNotification">
  <div class="toast fade hide p-2 bg-white" role="alert" aria-live="assertive" id="successToast" aria-atomic="true">
    <div class="toast-header border-0">
      <i class="material-icons text-success me-2">check</i>
      <span class="me-auto font-weight-bold">SoCioASP</span>
      <small class="text-body">11 mins ago</small>
      <i class="fas fa-times text-md ms-3 cursor-pointer" data-bs-dismiss="toast" aria-label="Close"></i>
    </div>
    <hr class="horizontal dark m-0">
    <div class="toast-body">
      Product added.
    </div>
  </div>
</main>
<main class="main-notification" *ngIf="errorOccurred">
  <!-- Contenu de la notification d'erreur -->
  <div class="container-fluid py-4">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <!-- Contenu de la notification d'erreur ici -->
        <div class="alert alert-danger" role="alert">
          Une erreur s'est produite lors de la sauvegarde du produit. Veuillez réessayer.
        </div>
      </div>
    </div>
  </div>
</main>
  </div>

  </div>

  <div class="multisteps-form__panel pt-3 border-radius-xl bg-white h-100" data-animation="FadeIn">
  <h5 class="font-weight-bolder">Pricing</h5>
  <div class="multisteps-form__content mt-3">
  <div class="row">
  <div class="col-3">
  <div class="input-group input-group-dynamic">
  <label class="form-label">Price</label>
  <input type="text" class="form-control w-100" id="priceInput" [(ngModel)]="product.price" name="price" />
  </div>
  </div>
  <div class="col-4">
  <select class="form-control" name="choices-sizes" id="choices-currency" [(ngModel)]="product.currency" name="currency">
    <option [value]="'USD'" [selected]="product.currency === 'USD'">USD</option>
    <option [value]="'EUR'" [selected]="product.currency === 'EUR'">EUR</option>
    <option [value]="'GBP'" [selected]="product.currency === 'GBP'">GBP</option>
    <option [value]="'CNY'" [selected]="product.currency === 'CNY'">CNY</option>
    <option [value]="'INR'" [selected]="product.currency === 'INR'">INR</option>
    <option [value]="'BTC'" [selected]="product.currency === 'BTC'">BTC</option>
  </select>
  </div>
  <div class="col-5">
  <div class="input-group input-group-dynamic">
  <label class="form-label">SKU</label>
  <input class="multisteps-form__input form-control" id="skuInput" type="text" [(ngModel)]="product.sku" name="SKU" />
</div>
  </div>
  </div>


  <div class="col-4">
    <select class="select-discount" name="choices-sizes" id="choices-discount" [(ngModel)]="product.discount" name="discount">
      <option value="0" selected>No discount</option>
      <option value="5">5% off</option>
      <option value="10">10% off</option>
      <option value="20">20% off</option>
    </select>
  </div>
  <div class="button-row d-flex mt-0 mt-md-4">
  <button class="btn bg-gradient-light mb-0 js-btn-prev" type="button" title="Prev">Prev</button>
  <button (click)="addProduct()" class="btn bg-gradient-dark ms-auto mb-0" type="button" title="Send">Send</button>

</div>
<!--success-->
<main class="main-notification" *ngIf="showNotification">
  <div class="toast fade hide p-2 bg-white" role="alert" aria-live="assertive" id="successToast" aria-atomic="true">
    <div class="toast-header border-0">
      <i class="material-icons text-success me-2">check</i>
      <span class="me-auto font-weight-bold">SoCioASP</span>
      <small class="text-body">11 mins ago</small>
      <i class="fas fa-times text-md ms-3 cursor-pointer" data-bs-dismiss="toast" aria-label="Close"></i>
    </div>
    <hr class="horizontal dark m-0">
    <div class="toast-body">
      Product added.
    </div>
  </div>
</main>
<main class="main-notification" *ngIf="errorOccurred">
  <!-- Contenu de la notification d'erreur -->
  <div class="container-fluid py-4">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <!-- Contenu de la notification d'erreur ici -->
        <div class="alert alert-danger" role="alert">
          Une erreur s'est produite lors de la sauvegarde du produit. Veuillez réessayer.
        </div>
      </div>
    </div>
  </div>
</main>
  </div>

  </div>
  </form>

  </div>

  </div>

  </div>

  </div>

  </div>

</div>

<script src="../../assets/js/plugins/dropzone.min.js"></script>
<script src="https://detect.roboflow.com/infer.e52137ed1b27e0a86d5a.js"></script>
<script src="https://loading.io/asset/731247"></script>
<script>
  var ldld = new ldLoader({root: '.ldld'});
</script>